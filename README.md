# 手部追踪画图应用

一个基于MediaPipe手部追踪技术的网页画图应用，通过摄像头识别手势进行绘画。

## 功能特性

### 🎨 绘画功能
- **手势绘画**: 使用食指指向手势进行绘画
- **多彩调色板**: 10种预设颜色可选
- **可调画笔**: 1-20像素可调节画笔大小
- **橡皮擦工具**: 擦除功能
- **清除画布**: 一键清空画布
- **保存图片**: 下载绘画作品为PNG格式

### 👋 手势控制
- **张开手掌** ✋: 移动光标
- **食指指向** 👆: 绘画模式
- **食指+中指** ✌️: 点击/选择工具
- **握拳** 👊: 停止绘画

### 📱 用户体验
- **实时手部追踪**: 基于MediaPipe技术
- **镜像摄像头**: 符合用户习惯的镜像显示
- **响应式设计**: 支持多种屏幕尺寸
- **键盘快捷键**: B(画笔)、E(橡皮擦)、C(清除)
- **视觉反馈**: 实时显示手势状态和工具信息

## 技术栈

- **前端**: HTML5, CSS3, JavaScript ES6+
- **手部追踪**: MediaPipe Hands
- **画布渲染**: HTML5 Canvas API
- **摄像头访问**: WebRTC getUserMedia API

## 使用方法

### 1. 环境要求
- 现代浏览器 (Chrome, Firefox, Safari, Edge)
- 摄像头权限
- **HTTPS连接或localhost访问** (摄像头权限必需)

### 2. 快速启动 (本地开发)

**自动启动脚本:**
```bash
# macOS/Linux
./start-local.sh

# Windows
start-local.bat
```

**手动启动:**
```bash
# Python (推荐)
python -m http.server 8000
# 访问 http://localhost:8000

# Node.js
npx serve . -p 8001
# 或 npx http-server -p 8001

# PHP
php -S localhost:8002
```

### 3. 摄像头权限设置

**⚠️ 重要：摄像头权限被拒绝时的解决方案**

#### Chrome 浏览器
1. **方法1**: 点击地址栏左侧的 🔒 或 📷 图标 → 选择"允许"
2. **方法2**: 
   - 右上角 ⋮ → 设置
   - 隐私设置和安全性 → 网站设置
   - 摄像头 → 找到本网站 → 允许

#### Firefox 浏览器
1. **方法1**: 点击地址栏左侧的 🔒 图标 → 摄像头权限 → 允许
2. **方法2**:
   - 右上角 ☰ → 设置
   - 隐私与安全 → 权限
   - 摄像头 → 设置 → 允许

#### Safari 浏览器
1. Safari → 偏好设置
2. 网站 → 摄像头
3. 找到本网站 → 选择"允许"

#### 权限被永久拒绝的解决方案
1. **清除网站数据**: 在浏览器设置中清除本网站的所有数据
2. **重置权限**: 在浏览器设置中重置摄像头权限
3. **使用隐私模式**: 在隐私/无痕模式下重新访问

### 4. 使用步骤
1. 启动本地服务器 (见上方快速启动)
2. 访问 http://localhost:端口号
3. **允许摄像头权限** (会有弹窗提示)
4. 将手伸入摄像头视野
5. 等待手部检测成功 (右上角状态显示)
6. 使用不同手势进行操作

### 5. 工具操作
- 选择颜色：点击调色板中的颜色
- 调节画笔：拖动画笔大小滑块
- 切换工具：点击画笔/橡皮擦按钮
- 清除画布：点击清除按钮
- 保存图片：点击保存按钮

## 部署说明

### Cloudflare Pages部署

1. **准备文件**
   - `index.html` - 主页面
   - `styles.css` - 样式文件
   - `app.js` - 应用逻辑

2. **部署步骤**
   ```bash
   # 1. 初始化Git仓库
   git init
   git add .
   git commit -m "Initial commit"
   
   # 2. 推送到GitHub/GitLab
   git remote add origin <your-repo-url>
   git push -u origin main
   
   # 3. 在Cloudflare Pages连接仓库自动部署
   ```

3. **配置要求**
   - 构建命令: 无需构建
   - 输出目录: `/` (根目录)
   - Node.js版本: 最新

## 浏览器兼容性

| 浏览器 | 支持版本 | 说明 |
|--------|----------|------|
| Chrome | 88+ | 完全支持 |
| Firefox | 85+ | 完全支持 |
| Safari | 14+ | 支持，性能略低 |
| Edge | 88+ | 完全支持 |

## 常见问题

### Q: 摄像头无法访问？
A: 检查浏览器权限设置，确保允许摄像头访问。HTTPS环境下权限更稳定。

### Q: 手部检测不准确？
A: 确保光线充足，手部完整在摄像头视野内，避免背景过于复杂。

### Q: 绘画延迟？
A: 降低视频分辨率，关闭其他占用资源的应用程序。

### Q: 手势识别错误？
A: 手势需要保持稳定200毫秒以上才会触发，避免手势变化过快。

## 开发说明

### 文件结构
```
graffiti/
├── index.html          # 主页面
├── styles.css          # 样式文件
├── app.js             # 应用逻辑
└── README.md          # 说明文档
```

### 核心类和方法
- `HandTrackingDrawingApp`: 主应用类
- `initializeMediaPipe()`: 初始化手部追踪
- `detectGesture()`: 手势识别逻辑
- `handleDrawing()`: 绘画处理逻辑

## 许可证

MIT License - 可自由使用和修改

## 贡献

欢迎提交Issue和Pull Request来改进应用！